<div class="container py-5">
  <header class="text-center mb-5">
    <h1 class="display-4 fw-bold text-primary-emphasis">Revalsys Premium Store</h1>
    <p class="lead text-secondary">Discover our curated collection of top-rated products</p>
    <div class="mx-auto bg-primary rounded" style="height: 4px; width: 60px;"></div>
  </header>

  <div class="row g-4">
    @for (item of products(); track item.id) {
      <div class="col-12 col-md-6 col-lg-4 col-xl-3">
        
        @defer (on viewport) {
          <div class="card h-100 shadow-sm border-0 product-card" [routerLink]="['/product', item.id]">
            <div class="image-wrapper p-3">
              <img [src]="item.image" 
                   class="card-img-top img-fluid" 
                   [alt]="item.title" 
                   loading="lazy"> </div>
            
            <div class="card-body d-flex flex-column">
              <span class="badge bg-light text-primary mb-2 align-self-start">{{ item.category }}</span>
              <h5 class="card-title text-truncate" [title]="item.title">{{ item.title }}</h5>
              <p class="card-text text-muted small flex-grow-1">
                {{ item.description | slice:0:70 }}...
              </p>
              <div class="d-flex justify-content-between align-items-center mt-3">
                <span class="h5 mb-0 text-dark fw-bold">${{ item.price }}</span>
                <button class="btn btn-primary btn-sm px-3">View Details</button>
              </div>
            </div>
          </div>
        } @placeholder {
          <div class="card h-100 shadow-sm border-0 bg-light animate-pulse" style="min-height: 380px;">
            <div class="card-body d-flex align-items-center justify-content-center">
              <div class="spinner-border text-primary opacity-25"></div>
            </div>
          </div>
        }

      </div>
    } @empty {
      @if (!isLoading()) {
        <div class="col-12 text-center py-5">
          <h3>No products found.</h3>
        </div>
      }
    }
  </div>
</div>